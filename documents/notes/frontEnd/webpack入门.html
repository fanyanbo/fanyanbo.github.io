<!DOCTYPE html>
<html lang="简体中文">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack入门 | 公众平台技术文档</title>
    <meta name="description" content="再小的个体，也有自己的品牌">
    <link rel="icon" href="/documents/favicon.ico">
    
    <link rel="preload" href="/documents/assets/css/0.styles.9a8dad7c.css" as="style"><link rel="preload" href="/documents/assets/js/app.cbb49199.js" as="script"><link rel="preload" href="/documents/assets/js/17.c38d828a.js" as="script"><link rel="prefetch" href="/documents/assets/js/10.011a0e75.js"><link rel="prefetch" href="/documents/assets/js/11.200ca197.js"><link rel="prefetch" href="/documents/assets/js/12.67f99fdc.js"><link rel="prefetch" href="/documents/assets/js/13.2808213b.js"><link rel="prefetch" href="/documents/assets/js/14.4fd1e650.js"><link rel="prefetch" href="/documents/assets/js/15.7997dc4a.js"><link rel="prefetch" href="/documents/assets/js/16.49201318.js"><link rel="prefetch" href="/documents/assets/js/18.6650bf53.js"><link rel="prefetch" href="/documents/assets/js/19.ee7020d2.js"><link rel="prefetch" href="/documents/assets/js/2.bca23384.js"><link rel="prefetch" href="/documents/assets/js/20.067b5ae4.js"><link rel="prefetch" href="/documents/assets/js/21.468954f2.js"><link rel="prefetch" href="/documents/assets/js/3.42e299bc.js"><link rel="prefetch" href="/documents/assets/js/4.893f8f8c.js"><link rel="prefetch" href="/documents/assets/js/5.0185a08a.js"><link rel="prefetch" href="/documents/assets/js/6.341c7dfb.js"><link rel="prefetch" href="/documents/assets/js/7.98544a2e.js"><link rel="prefetch" href="/documents/assets/js/8.3daa293b.js"><link rel="prefetch" href="/documents/assets/js/9.3493f8c2.js">
    <link rel="stylesheet" href="/documents/assets/css/0.styles.9a8dad7c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documents/" class="home-link router-link-active"><!----> <span class="site-name">公众平台技术文档</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/documents/" class="nav-link">主页</a></div><div class="nav-item"><a href="/documents/frontEnd/" class="nav-link">前端规范</a></div><div class="nav-item"><a href="/documents/development/" class="nav-link">开发环境</a></div><div class="nav-item"><a href="/documents/notes/" class="nav-link router-link-active">学习文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents/notes/frontEnd/webpack入门.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/documents/en/" class="nav-link">English</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/documents/" class="nav-link">主页</a></div><div class="nav-item"><a href="/documents/frontEnd/" class="nav-link">前端规范</a></div><div class="nav-item"><a href="/documents/development/" class="nav-link">开发环境</a></div><div class="nav-item"><a href="/documents/notes/" class="nav-link router-link-active">学习文档</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documents/notes/frontEnd/webpack入门.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/documents/en/" class="nav-link">English</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>前端</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/documents/notes/frontEnd/前端优化不完全指南.html" class="sidebar-link">前端优化不完全指南</a></li><li><a href="/documents/notes/frontEnd/VueJS组件编码规范.html" class="sidebar-link">VueJS组件编码规范</a></li><li><a href="/documents/notes/frontEnd/vue-cli脚手架快速搭建项目.html" class="sidebar-link">Vue-cli脚手架快速搭建项目图文教程</a></li><li><a href="/documents/notes/frontEnd/深入理解vue中的slot与slot-scope.html" class="sidebar-link">深入理解vue中slot与slot-scope</a></li><li><a href="/documents/notes/frontEnd/webpack入门.html" class="active sidebar-link">webpack入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#起步" class="sidebar-link">起步</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#打包-javascript-模块" class="sidebar-link">打包 JavaScript 模块</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#资源管理" class="sidebar-link">资源管理</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#url-loader" class="sidebar-link">Url Loader</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#输出管理" class="sidebar-link">输出管理</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#develoment-开发" class="sidebar-link">Develoment 开发</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#hot-module-replacement-热更新" class="sidebar-link">Hot Module Replacement 热更新</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#vue-loader" class="sidebar-link">Vue Loader</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#resolve" class="sidebar-link">Resolve</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#externals" class="sidebar-link">externals</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#save-和-save-dev-的区别" class="sidebar-link">--save 和 --save-dev 的区别</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#vue-webpack-starter" class="sidebar-link">vue-webpack-starter</a></li><li class="sidebar-sub-header"><a href="/documents/notes/frontEnd/webpack入门.html#webpack-打包优化发布策略" class="sidebar-link">webpack 打包优化发布策略</a></li></ul></li><li><a href="/documents/notes/frontEnd/PWA初次体验.html" class="sidebar-link">PWA介绍及快速上手搭建一个PWA应用</a></li><li><a href="/documents/notes/frontEnd/最全前端资源汇集.html" class="sidebar-link">最全前端资源汇集</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>后端</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack入门"><a href="#webpack入门" aria-hidden="true" class="header-anchor">#</a> webpack入门</h1> <h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2> <ul><li>是什么
<ul><li>打包工具</li> <li>JavaScript 模块打包之后就可以运行在浏览器</li></ul></li> <li>能做什么
<ul><li>webpack 可以当作是一个模块打包平台，但是它本身只能打包 JavaScript 模块</li> <li>对于其它的文件模块资源，则需要使用第三方 loader 来处理</li> <li>JavaScript 资源打包</li> <li>css 打包</li> <li>图片 打包</li> <li>less</li> <li>sass</li> <li>babel EcmaScript 6 转 EcmaScript 5</li> <li>开发工具：http 服务器</li> <li>代码改变，自动刷新浏览器</li> <li>压缩代码</li> <li>JavaScript 代码压缩</li> <li>html 代码压缩</li> <li>css 代码压缩</li> <li>。。。。</li></ul></li> <li><a href="http://webpack.github.io/" target="_blank" rel="noopener noreferrer">webpack 1.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://webpack.js.org/" target="_blank" rel="noopener noreferrer">webpack 2.x<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://webpack.js.org/guides/" target="_blank" rel="noopener noreferrer">官方指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="起步"><a href="#起步" aria-hidden="true" class="header-anchor">#</a> 起步</h2> <h3 id="hello-world"><a href="#hello-world" aria-hidden="true" class="header-anchor">#</a> hello world</h3> <p>全局安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --global webpack
</code></pre></div><p>准备目录结构：</p> <div class="language- extra-class"><pre class="language-text"><code>.
├── index.html
├── main.js
└── foo.js
</code></pre></div><p><code>foo.js</code> 文件内容如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是 foo 文件模块啊'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>main.js</code> 文件内容如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo'</span><span class="token punctuation">)</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>打包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>webpack main.js bundle.js
</code></pre></div><p><code>index.html</code> 文件内容如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- &lt;script src=&quot;js/main.js&quot;&gt;&lt;/script&gt; --&gt;</span>
  <span class="token comment">&lt;!-- 最后记得把 index.html 文件中的脚本应用改为打包之后的结果文件路径。 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>js/bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>打开查看 index.html。</p> <p>为了划分目录结构的清晰，所以我们把项目中的源码和打包结果做了如下划分：</p> <ul><li>把源码存储到 src 目录中</li> <li>把打包的结果存储到 dist 目录中</li></ul> <h3 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h3> <p>全局安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --global webpack
</code></pre></div><p>安装在全局的 webpack 打包的时候使用的是你安装在自己电脑上的 webpack，如果到了另一个人的计算机上，它可能安装的是老板本的 webpack。那么就可能涉及到兼容性的问题。</p> <p>而且如果对方没有在全局安装 webpack 则就无法打包。</p> <p>所以，为了解决以上的问题，我们更推荐把 webpack 安装到本地项目中。这样的话项目到哪里，webpack 就跟到了哪里。（打包工具随着项目走）。</p> <p>我们安装的时候把 webpack 安装到开发依赖(--save-dev)中，因为 webpack 只是一个打包工具，项目如果需要上线，上线的是打包的结果，而不是这个工具。所以了我们为了区分核心包依赖和开发工具依赖，这里通过 <code>--save</code> 和 <code>--save-dev</code> 来区分。</p> <p>本地安装（推荐）：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev webpack
</code></pre></div><p>对于安装到项目中的 webpack 需要配置 npm scripts 来使用：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;demo2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack.config.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./src/a.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;b&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./src/b.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./src/main.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.8.1&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然后通过 <code>npm run</code> 命令来打包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run a

<span class="token comment"># start 比较特殊，可以不加 run</span>
<span class="token function">npm</span> start

<span class="token comment"># 打包构建</span>
<span class="token comment"># 这里使用的 webpack 就是项目中安装的 webpack</span>
<span class="token function">npm</span> run build
</code></pre></div><h3 id="配置文件-webpack-config-js"><a href="#配置文件-webpack-config-js" aria-hidden="true" class="header-anchor">#</a> 配置文件 <code>webpack.config.js</code></h3> <p>最基本的配置项：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 该文件其实最终是要在 Node 环境下执行的</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// 导出一个具有特殊属性配置的对象</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件模块路径</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 出口文件模块所属目录，path 必须是一个绝对路径</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span> <span class="token comment">// 打包的结果文件名称</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>打包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># webpack 会自动读取 webpack.config.js 文件作为默认的配置文件</span>
<span class="token comment"># 也可以通过 --config 参数来手动指定配置文件</span>
webpack
</code></pre></div><h3 id="npm-scripts"><a href="#npm-scripts" aria-hidden="true" class="header-anchor">#</a> npm scripts</h3> <h2 id="打包-javascript-模块"><a href="#打包-javascript-模块" aria-hidden="true" class="header-anchor">#</a> 打包 JavaScript 模块</h2> <h3 id="javascript-模块化"><a href="#javascript-模块化" aria-hidden="true" class="header-anchor">#</a> JavaScript 模块化</h3> <ul><li>AMD
<ul><li>Require.js</li></ul></li> <li>CMD
<ul><li>Sea.js</li></ul></li> <li>CommonJS 模块规范</li> <li>以上都是民间搞出来的，所以在 2015 年的 EcmaScript 6 中官方就发布了官方的 模块规范：EcmaScript 6 Module 模块规范
<ul><li>我们更推荐在项目中使用 EcmaScript 6 模块规范</li> <li>以后的统一趋势</li></ul></li> <li>webpack
<ul><li>AMD</li> <li>CMD</li> <li>CommonJS</li> <li>EcmaScript 6 Module</li></ul></li></ul> <h3 id="ecmascript-6-模块规范"><a href="#ecmascript-6-模块规范" aria-hidden="true" class="header-anchor">#</a> EcmaScript 6 模块规范</h3> <p>导入 import（require）</p> <p>导出 export（module.exports）</p> <p>导出默认成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 默认成员只能有一个，否则报错</span>
exports <span class="token keyword">default</span> 成员
</code></pre></div><p>加载默认成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 如果没有 default 成员，则加载到的就是 undefined</span>
<span class="token keyword">import</span> xxx <span class="token keyword">from</span> <span class="token string">'模块标识'</span>
</code></pre></div><p>导出多个成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// export 必须引用到内部的一个成员</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">456</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果你觉得上面的方式比较麻烦，也可以以这样的方式来导出多个成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">123</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">456</span>
<span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注意：这里不是对象的简写方式，这是导出的特殊语法</span>
<span class="token comment">// 这种方式也不是覆盖，后面还可以继续导出</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
  a<span class="token punctuation">,</span>
  b<span class="token punctuation">,</span>
  fn
<span class="token punctuation">}</span>

<span class="token comment">// 可以继续增加导出的成员</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y
<span class="token punctuation">}</span>

<span class="token comment">// 最终导出的实际上是 a、b、fn、add</span>
</code></pre></div><p>按需加载指定的多个成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span> b<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'模块标识'</span>
</code></pre></div><p>一次性加载所有的导出成员：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 所有成员包含 default</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> xxx <span class="token keyword">from</span> <span class="token string">'模块标识'</span>
</code></pre></div><h2 id="资源管理"><a href="#资源管理" aria-hidden="true" class="header-anchor">#</a> 资源管理</h2> <p>webpack 不仅可以打包 JavaScript 模块，甚至它把网页开发中的一切资源都可以当作模块来打包处理。</p> <p>按时它本身不知此，它只是一个打包平台，其它资源，例如 css、less、sass、img 等资源需要结合插件来实现，这些插件在 webpack 中被称之为 loader ，翻译过来就是 加载器 的意思。</p> <h3 id="loading-css"><a href="#loading-css" aria-hidden="true" class="header-anchor">#</a> Loading CSS</h3> <p>安装依赖：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># CSS-loader 的作用是吧 CSS 文件转为 JavaScript 模块</span>
<span class="token comment"># style-loader 的作用是动态创建 style 节点插入到 head 中</span>
<span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 这里必须是绝对路径</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 注意：这里的顺序很重要，不要乱了顺序，从咱们的角度，老外的思维是反的</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>打包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run build
</code></pre></div><p>解释：打包 css 也是把 CSS 文件内容转换成了一个 JavaScript 模块，然后在运行 JavaScript 的时候，会动态的创建一个 style 节点插入到 head 头部。</p> <h3 id="loading-images"><a href="#loading-images" aria-hidden="true" class="header-anchor">#</a> Loading Images</h3> <p>安装依赖：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev file-loader
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/.(jpg|png|gif|svg)$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'file-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="loading-fonts"><a href="#loading-fonts" aria-hidden="true" class="header-anchor">#</a> Loading Fonts</h3> <h3 id="loading-data"><a href="#loading-data" aria-hidden="true" class="header-anchor">#</a> Loading Data</h3> <h3 id="loading-less"><a href="#loading-less" aria-hidden="true" class="header-anchor">#</a> Loading Less</h3> <p>安装依赖：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 如果 css-loader 安装过了就不需要安装了</span>
<span class="token function">npm</span> i -D css-loader style-loader <span class="token function">less</span> less-loader
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 3. 根据模块生成 style 节点插入 head 中</span>
        <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 2. 在把 css 转成 JavaScript 模块</span>
        <span class="token string">'less-loader'</span> <span class="token comment">// 1. 先把 less 转成 css</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="loading-sass"><a href="#loading-sass" aria-hidden="true" class="header-anchor">#</a> Loading Sass</h3> <h3 id="transpiling-javascript"><a href="#transpiling-javascript" aria-hidden="true" class="header-anchor">#</a> transpiling JavaScript</h3> <ul><li>babel
<ul><li><a href="http://babeljs.io/" target="_blank" rel="noopener noreferrer">http://babeljs.io/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>babel 是一个 JavaScript 编译器，可以把 EcmaScript 6 编译成 EcmaScript 5</li> <li>babel 可以独立使用，但是独立使用没有意义，一般是和 webpack 结合到一起来使用的</li></ul></li> <li>cacheDirectory</li> <li>babel-polyfill
<ul><li>默认 babel 只转换语法</li> <li>我们可以使用 babel-polyfill 来转换 EcmaScript 6 中的 API</li></ul></li> <li>babel runtime</li></ul> <p>安装依赖：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-loader babel-core babel-preset-env
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span> <span class="token comment">// 不转换 node_modules 中的文件模块</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'env'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="配置-babel-polyfill-来提供低版本浏览器中的不支持-api"><a href="#配置-babel-polyfill-来提供低版本浏览器中的不支持-api" aria-hidden="true" class="header-anchor">#</a> 配置 babel-polyfill 来提供低版本浏览器中的不支持 API</h4> <p>安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i -D babel-polyfill
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'babel-polyfill'</span><span class="token punctuation">,</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>这样话就会在打包的结果中提供一个垫脚片用以兼容低版本浏览器中的不支持的 API。</p> <h4 id="配置-transform-runtime-来解决代码重复问题"><a href="#配置-transform-runtime-来解决代码重复问题" aria-hidden="true" class="header-anchor">#</a> 配置 transform-runtime 来解决代码重复问题</h4> <p>在打包过程中，babel 会在某给包提供一些工具函数，而这些工具函数可能会重复的出现在多个模块。这样的话就会导报打包体积过大，所以 babel 提供了一个 babel-transform-runtime 来解决这个打包体积过大的问题。</p> <p>安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> babel-plugin-transform-runtime --save-dev
<span class="token function">npm</span> <span class="token function">install</span> babel-runtime --save
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'env'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'transform-runtime'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="加入缓存节省编译时间"><a href="#加入缓存节省编译时间" aria-hidden="true" class="header-anchor">#</a> 加入缓存节省编译时间</h4> <p>babel 编译是非常耗时的，我们可以通过开启对编译结果的缓存来提高打包速度：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// 默认把打包的结果缓存到 node_modules/.cache 模板</span>
          cacheDirectory<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'env'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'transform-runtime'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="url-loader"><a href="#url-loader" aria-hidden="true" class="header-anchor">#</a> Url Loader</h2> <ul><li>小图片直接 base64 编码到 html 文件中</li> <li>大图片拷贝到打包目录中</li></ul> <h2 id="输出管理"><a href="#输出管理" aria-hidden="true" class="header-anchor">#</a> 输出管理</h2> <h3 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" aria-hidden="true" class="header-anchor">#</a> HtmlWebpackPlugin</h3> <p>你会发现，当你打包结束的时候，如果 index.html 在根目录直接运行的话，那么图片资源这些路径就无法访问到了。解决方案就是把 index.html 放到 dist 目录中。</p> <p>但是 dist 是打包编译的结果，而非源码，所以把 index.html 放到 dist 就不合适。</p> <p>而且你也会发现，我们打包的结果文件名：<code>bundle.js</code> ，如果一旦我把这个文件名给改了，则 index.html 也要手动修改。</p> <p>综合以上我们遇到的问题，我们就可以使用一个插件：<code>html-webpack-plugin</code> 来解决。</p> <p>安装依赖：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i -D html-webpack-plugin
</code></pre></div><p>配置：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>plugins: <span class="token punctuation">[</span>
  // 该插件的所用就是把 index.html 打包到你的 bundle.js 文件所属目录
  // 也就是说 bundle 到哪里，index.html 就到哪里
  // 同时这个也会自动在 index.html 中出入 script 引用连接
  // 而且引用的资源名称，也取决于你的 bundle 叫什么
  // 这个插件还可以配置压缩 html 的处理
  new htmlWebpackPlugin<span class="token punctuation">(</span><span class="token punctuation">{</span>
    template: <span class="token string">'./index.html'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>,
</code></pre></div><h3 id="cleanwebpackplugin"><a href="#cleanwebpackplugin" aria-hidden="true" class="header-anchor">#</a> CleanWebpackPlugin</h3> <h2 id="develoment-开发"><a href="#develoment-开发" aria-hidden="true" class="header-anchor">#</a> Develoment 开发</h2> <h3 id="source-maps"><a href="#source-maps" aria-hidden="true" class="header-anchor">#</a> Source maps</h3> <h3 id="webpack-dev-server"><a href="#webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> webpack-dev-server</h3> <p>每一次手动打包很麻烦，而且即便有 <code>--watch</code> 也不方便，还需要自己手动刷新浏览器。</p> <p>所以 webpack 给你提供了一个工具：<code>webpack-dev-server</code></p> <p>它就可以实现监视代码改变，自动打包，打包完毕自动刷新浏览器的功能。</p> <p>安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i -D webpack-dev-server
</code></pre></div><p>配置：</p> <div class="language-json extra-class"><pre class="language-json"><code>devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 配置 webpack-dev-server 的 www 目录</span>
  contentBase<span class="token operator">:</span> './dist'
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>配置 npm scritps:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;watch-build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --open&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>启动开发模式：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run dev
</code></pre></div><p>解释：该工具会自动帮你打包，打包完毕只有会自动开启一个服务器，默认监听 8080 端口号，同时自动打开浏览器让你访问，接下来就会自动监视代码的改变，然后自动编译，编译完毕，自动刷新浏览器。</p> <h4 id="客户端代理"><a href="#客户端代理" aria-hidden="true" class="header-anchor">#</a> 客户端代理</h4> <blockquote><p><a href="https://webpack.js.org/configuration/dev-server/#devserver-proxy" target="_blank" rel="noopener noreferrer">https://webpack.js.org/configuration/dev-server/#devserver-proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="eslint-代码规范校验"><a href="#eslint-代码规范校验" aria-hidden="true" class="header-anchor">#</a> ESLint 代码规范校验</h3> <ul><li>eslint</li> <li>eslint-loader</li> <li>eslint-plugin-html</li> <li>安装</li> <li>初始化 <code>.eslintrc.js</code> 配置文件</li> <li>配置到 webpack</li></ul> <h2 id="hot-module-replacement-热更新"><a href="#hot-module-replacement-热更新" aria-hidden="true" class="header-anchor">#</a> Hot Module Replacement 热更新</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token operator">++</span><span class="token operator">+</span> <span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'babel-polyfill'</span><span class="token punctuation">,</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 这里必须是绝对路径</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 该插件的所用就是把 index.html 打包到你的 bundle.js 文件所属目录</span>
    <span class="token comment">// 也就是说 bundle 到哪里，index.html 就到哪里</span>
    <span class="token comment">// 同时这个也会自动在 index.html 中出入 script 引用连接</span>
    <span class="token comment">// 而且引用的资源名称，也取决于你的 bundle 叫什么</span>
    <span class="token comment">// 这个插件还可以配置压缩 html 的处理</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token punctuation">:</span> <span class="token string">'./index.html'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">++</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">++</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置 webpack-dev-server 的 www 目录</span>
    <span class="token comment">// 浏览器真正运行查看的是打包之后的结果</span>
    <span class="token comment">// webpack-dev-server 为了提高打包效率，它把文件存储在了内存中，你看不见</span>
    <span class="token comment">// 这里你只是在告诉 webpack-dev-server 让你的打包结果运行在虚拟目录 dist 中</span>
    <span class="token comment">// 那这个时候你的打包结果中的 index.html 去加载资源时候确实需要相对于 dist 来找</span>
    <span class="token comment">// ./ 的话，webpack-dev-server 就会直接把资源打包到项目根目录下</span>
    <span class="token comment">// 但是注意：你也看不见它</span>
    <span class="token comment">// 那这个时候你在 index.html 文件中请求的资源就是相对于 demo7 根目录</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'./'</span><span class="token punctuation">,</span>
    <span class="token operator">++</span><span class="token operator">+</span> hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// key 就是包名</span>
    <span class="token comment">// value 是全局的 jQuery 导出的接口</span>
    vue<span class="token punctuation">:</span> <span class="token string">'Vue'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.(jpg|png|gif|svg)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'file-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.less$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 3. 根据模块生成 style 节点插入 head 中</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 2. 在把 css 转成 JavaScript 模块</span>
          <span class="token string">'less-loader'</span> <span class="token comment">// 1. 先把 less 转成 css，less-loader 依赖 less，所以 less 也要安装进来</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            cacheDirectory<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'env'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'transform-runtime'</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.vue$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'vue-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="vue-loader"><a href="#vue-loader" aria-hidden="true" class="header-anchor">#</a> Vue Loader</h2> <blockquote><p>打包 .vue 单文件组件的</p> <p><a href="https://cn.vuejs.org/v2/guide/single-file-components.html" target="_blank" rel="noopener noreferrer">Vue 单文件组件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://vue-loader.vuejs.org/" target="_blank" rel="noopener noreferrer">Vue Loader 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># vue-loader 依赖 vue-template-compiler</span>
<span class="token function">npm</span> i -D vue-loader vue-template-compiler
</code></pre></div><p>配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/.vue$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token string">'vue-loader'</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="组件细则"><a href="#组件细则" aria-hidden="true" class="header-anchor">#</a> 组件细则</h3> <p><code>.vue</code> 文件是一个自定义的文件类型，用类 HTML 语法描述一个 Vue 组件。每个 <code>.vue</code> 文件包含三种类型的顶级语言块 <code>&lt;template&gt;</code>、<code>&lt;script&gt;</code> 和 <code>&lt;style&gt;</code></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      msg<span class="token punctuation">:</span> <span class="token string">'Hello world!'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="语言块"><a href="#语言块" aria-hidden="true" class="header-anchor">#</a> 语言块</h3> <ul><li><p><code>&lt;template&gt;</code></p> <ul><li>默认语言：<code>html</code>。</li> <li>每个 <code>.vue</code> 文件最多包含一个 <code>&lt;template&gt;</code> 块。</li> <li>内容将被提取为字符串，将编译并用作 Vue 组件的 <code>template</code> 选项。</li></ul></li> <li><p><code>&lt;script&gt;</code></p> <ul><li>默认语言：<code>js</code> (在检测到 <code>babel-loader</code> 或 <code>buble-loader</code> 配置时自动支持ES2015)。</li> <li>每个 <code>.vue</code> 文件最多包含一个 <code>&lt;script&gt;</code> 块。</li> <li>该脚本在类 CommonJS 环境中执行 (就像通过 Webpack 打包的正常 js 模块)，这意味这你可以 <code>require()</code> 其它依赖。在 ES2015 支持下，你也可以使用 <code>import</code> 和 <code>export</code> 语法。</li> <li>脚本必须导出 Vue.js 组件对象。</li></ul></li> <li><p><code>&lt;style&gt;</code></p> <ul><li>默认语言：<code>css</code>。</li> <li>一个 <code>.vue</code> 文件可以包含多个 <code>&lt;style&gt;</code> 标签。</li> <li><code>&lt;style&gt;</code> 标签可以有 <code>scoped</code> 或者 <code>module</code> 属性 (查看 <a href="https://vue-loader.vuejs.org/zh-cn/features/scoped-css.html" target="_blank" rel="noopener noreferrer">CSS 作用域<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和 <a href="https://vue-loader.vuejs.org/zh-cn/features/css-modules.html" target="_blank" rel="noopener noreferrer">CSS Modules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) 以帮助你将样式封装到当前组件。具有不同封装模式的多个 <code>&lt;style&gt;</code> 标签可以在同一个组件中混合使用。</li> <li>默认情况下，将会使用 <code>style-loader</code> 提取内容，并通过 <code>&lt;style&gt;</code>标签动态加入文档的 <code>&lt;head&gt;</code> 中，也可以<a href="https://vue-loader.vuejs.org/zh-cn/configurations/extract-css.html" target="_blank" rel="noopener noreferrer">配置 Webpack 将所有 styles 提取到单个 CSS 文件中<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li></ul></li></ul> <h3 id="css-作用域"><a href="#css-作用域" aria-hidden="true" class="header-anchor">#</a> css 作用域</h3> <p>当 <code>&lt;style&gt;</code> 标签有 <code>scoped</code> 属性时，它的 CSS 只作用于当前组件中的元素。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>也可以在一个组件中同时使用有作用域和无作用域的样式：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 全局样式 */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 本地样式 */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果你希望 <code>scoped</code> 样式中的一个选择器能够作用得“更深”，例如影响子组件，你可以使用 <code>&gt;&gt;&gt;</code> 操作符：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.a &gt;&gt;&gt; .b</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="resolve"><a href="#resolve" aria-hidden="true" class="header-anchor">#</a> Resolve</h2> <h3 id="alias"><a href="#alias" aria-hidden="true" class="header-anchor">#</a> alias</h3> <blockquote><p>参考文档：</p> <p>作用：配置别名，解决文件路径改变以及加载路径过深问题。</p></blockquote> <h3 id="extensions"><a href="#extensions" aria-hidden="true" class="header-anchor">#</a> extensions</h3> <h2 id="externals"><a href="#externals" aria-hidden="true" class="header-anchor">#</a> externals</h2> <blockquote><p>配置 webpack 不打包第三方包</p></blockquote> <p>通常情况下我们不打包第三方包，因为第三方包太大，和 bundle 打包到一起会造成资源体积过大，所以我们还是通过 script 标签的方式把第三方资源引入到页面中，只需要通过以下配置即可，这里以 jQuery 为例：</p> <ol><li>下载第三方包</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i jquery
</code></pre></div><ol start="2"><li>在页面中引入资源</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>node_modules/jquery/dist/jquery.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>配置</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// key 是第三方包名称，value 是全局中的 jQuery 对象</span>
  <span class="token comment">// 这里配置的含义就是：当你在代码中 import jquery 的时候，不会把 jquery 打包到 bundle 中，而是使用我指定的全局中的 jQuery 对象</span>
  jquery<span class="token punctuation">:</span> <span class="token string">'jQuery'</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>加载使用</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
  backgroundColor<span class="token punctuation">:</span> <span class="token string">'pink'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li>打包测试</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> run build
</code></pre></div><h2 id="save-和-save-dev-的区别"><a href="#save-和-save-dev-的区别" aria-hidden="true" class="header-anchor">#</a> <code>--save</code> 和 <code>--save-dev</code> 的区别</h2> <p>我们把开发工具相关的依赖信息保存到 <code>devDependencies</code> 选项中。把核心依赖（例如 vue）的依赖信息保存到 <code>dependencies</code> 选项中。</p> <p>这样做的话，就是把开发依赖和核心依赖分开了，因为开发依赖在打包结束之后上线的话就不需要。</p> <p>最后项目上线，我们真正需要安装发布的是 <code>dependencies</code> 依赖项中的包。</p> <p>我们可以通过命令来只安装 <code>dependencies</code> 依赖项中的包：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --production
</code></pre></div><h2 id="vue-webpack-starter"><a href="#vue-webpack-starter" aria-hidden="true" class="header-anchor">#</a> vue-webpack-starter</h2> <h3 id="在模块化环境中使用-vue-router"><a href="#在模块化环境中使用-vue-router" aria-hidden="true" class="header-anchor">#</a> 在模块化环境中使用 vue-router</h3> <ol><li>下载</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i vue-router
</code></pre></div><ol start="2"><li>引用资源</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>node_modules/vue-router/dist/vur-router.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>配置 externals</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code>externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">'vue-router'</span><span class="token punctuation">:</span> <span class="token string">'VueRouter'</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>在 <code>router.js</code> 文件中加载使用</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> Foo <span class="token keyword">from</span> <span class="token string">'./components/Foo.vue'</span>
<span class="token keyword">import</span> Bar <span class="token keyword">from</span> <span class="token string">'./components/Bar.vue'</span>

<span class="token comment">// 这里直接默认导出 new 出来的 router 实例</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> Foo
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token string">'/bar'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> Bar
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><ol start="5"><li>在 <code>main.js</code> 文件中配置使用路由对象</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token operator">++</span><span class="token operator">+</span> <span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  components<span class="token punctuation">:</span> <span class="token punctuation">{</span> App <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token punctuation">:</span> <span class="token string">'&lt;App /&gt;'</span><span class="token punctuation">,</span>
  <span class="token operator">++</span><span class="token operator">+</span> router
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre></div><ol start="6"><li>在 <code>App.vue</code> 中设置路由出口</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>根组件 hh <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/foo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/bar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  +++ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="webpack-打包优化发布策略"><a href="#webpack-打包优化发布策略" aria-hidden="true" class="header-anchor">#</a> webpack 打包优化发布策略</h2> <blockquote><p>webpack 优化还是很有必要的</p></blockquote> <ul><li><p>开发配置文件：<code>webpack.dev.conf.js</code></p></li> <li><p>发布配置文件：<code>webpack.prod.conf.js</code></p></li> <li><p>使用 url-loader 减少网站中图片资源的请求数量</p> <ul><li>小图片直接 base64 内置到模板中</li> <li>大图片拷贝到结果目录中</li> <li>把图片资源分离到特定的目录中</li></ul></li> <li><p>使用 <code>clean-webpack-plugin</code> 清除 <code>dist</code> 目录</p></li> <li><p>分离第三方包（解决 js 文件体积过大的问题）</p> <ul><li>多入口</li> <li><code>webpack.optimize.CommonsChunkPlugin()</code></li></ul></li> <li><p>压缩 html</p> <ul><li>减小文件体积，提高加载速度</li></ul></li> <li><p>压缩 JavaScript</p> <ul><li>减小文件体积，提高加载速度</li> <li><code>webpack.optimize.UglifyJsPlugin()</code></li> <li><code>webpack.optimize.DedupePlugin()</code> 配置插件环境变量</li> <li>把 JavaScript 分离到指定的目录中</li></ul></li> <li><p>抽离 CSS 样式文件</p> <ul><li>为了让浏览器尽快的优先加载样式，也是为了解决js 文件体积过大的问题</li> <li>把 css 分离到指定的目录结构中</li> <li>extract-text-webpack-plugin</li></ul></li> <li><p>压缩抽取出来的 CSS 文件：</p> <p>https://github.com/webpack-contrib/css-loader#minimize</p> <ul><li>压缩 CSS 也是为了减小文件题解，提高响应速度</li></ul></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/documents/assets/js/app.cbb49199.js" defer></script><script src="/documents/assets/js/17.c38d828a.js" defer></script>
  </body>
</html>
